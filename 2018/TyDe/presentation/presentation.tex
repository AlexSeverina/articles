\documentclass[xcolor=table]{beamer}
\usepackage{beamerthemesplit}
\usepackage{wrapfig}
\usetheme{SPbGU}
\usepackage{pdfpages}
\usepackage{amsmath}
\usepackage{cmap} 
\usepackage[T2A]{fontenc} 
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{indentfirst}
\usepackage{amsmath}
\usepackage{tikz}
\usepackage{multirow}
\usepackage[noend]{algpseudocode}
\usepackage{algorithm}
\usepackage{algorithmicx}
\usepackage{fancyvrb}
\usetikzlibrary{shapes,arrows}
%usepackage{fancyvrb}
%\usepackage{minted}
%\usepackage{verbments}

\newtheorem{mytheorem}{Theorem}
\renewcommand{\thealgorithm}{}


\beamertemplatenavigationsymbolsempty

\title[F\# OpenCL TP]{F\# OpenCL Type Provider}
%\subtitle[YaccConstructor]{Parsing techniques for graph analysis}
% То, что в квадратных скобках, отображается в левом нижнем углу. 
\institute[JetBrains Research]{
JetBrains Research, Programming Languages and Tools Lab  \\
Saint Petersburg University
}

% То, что в квадратных скобках, отображается в левом нижнем углу.
\author[Semyon Grigorev]{Kirill Smirenko, \textbf{Semyon Grigorev}}

\date{September 27, 2018}

\definecolor{orange}{RGB}{179,36,31}

\begin{document}
{
\begin{frame}[fragile]
  \begin{tabular}{p{3.5cm} p{5.5cm} p{1cm}}
   \begin{center}
      \includegraphics[height=1.5cm]{pictures/jetbrainsResearch.pdf}
    \end{center}
    &
    \begin{center}
      \includegraphics[height=1.5cm]{pictures/icfplogo.png}
    \end{center}
    &
    \begin{center}
      \includegraphics[height=1.5cm]{pictures/SPbGU_Logo.png}
    \end{center} 
  \end{tabular}
  \titlepage
\end{frame}
}

\begin{frame}[fragile]
  \transwipe[direction=90]
  \frametitle{GPGPU}
  \begin{minipage}[m]{0.45\linewidth}
\raisebox{-0.5\totalheight}{\includegraphics[width=\textwidth]{pictures/hierarchical.pdf}}
\end{minipage}\hfill
\begin{minipage}[m]{0.5\linewidth}
Navigation through a graph
\begin{itemize}
      \item Are nodes A and B on the same level of hierarchy?
      \item Is there a path of form $\textbf{Up}^n \, \textbf{Down}^n$?
      \item Find all paths of form $\textbf{Up}^n \, \textbf{Down}^n$ which start from the~node A
\end{itemize}

\end{minipage}

\end{frame}

\begin{frame}[fragile]
  \transwipe[direction=90]
  \frametitle{Problem: GPGPU in applicatiions}
  \begin{itemize}
    \item $\mathbb{G} = (\Sigma, N, P)$ --- context-free grammar in normal form
    \begin{itemize}
      \item $A \rightarrow B C$, where $A, B, C \in N$
      \item $A \rightarrow x$, where $A \in N, x \in \Sigma$
      \item $L(\mathbb{G},A) = \{ \omega \mid A \rightarrow^* \omega \}$
    \end{itemize}
    \item $G = (V,E,L)$ --- directed graph
      \begin{itemize} 
        \item $v \xrightarrow{l} u \in E$
        \item $L \subseteq \Sigma$
      \end{itemize}
    %\item $p = v_0 \xrightarrow{l_0} v_1 \xrightarrow{l_1} \cdots \xrightarrow{l_{n-2}} v_{n-1} \xrightarrow{l_{n-1}} v_n$ --- path in $G$
    \item $\omega(\pi) = \omega(v_0 \xrightarrow{l_0} v_1 \xrightarrow{l_1} \cdots \xrightarrow{l_{n-2}} v_{n-1} \xrightarrow{l_{n-1}} v_n) = l_0 l_1 \cdots l_{n-1}$
    \item $R_A = \{ (n, m) \mid \exists n \pi m$, such that $\omega(\pi) \in L(\mathbb{G},A)\}$
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \transwipe[direction=90]
  \frametitle{Existing tools}
  \begin{itemize}
   \item Widely spread
    \begin{itemize}
      \item Graph databases query languages (SPARQL, Cypher, PGQL)
      \item Network analysis
    \end{itemize}  
    \item Still in active development
    \begin{itemize}
      \item OpenCypher: \url{https://goo.gl/5h5a8P}
      \item Scalability, huge graphs processing
      \item Derivatives for graph querying: \emph{Maurizio Nole and Carlo Sartiani.} Regular path queries on massive graphs. 2016
    \end{itemize}   
  \end{itemize}
\end{frame}


\begin{frame}[fragile]
  \transwipe[direction=90]
  \frametitle{Context-Free Language Constraints}
  \begin{itemize}
  \item Graph databases and semantic networks (Context-Free Path Querying, CFPQ)
    \begin{itemize}
        \item \emph{Sevon P., Eronen L.} ``Subgraph queries by context-free grammars.'' 2008
        \item \emph{Hellings J.} ``Conjunctive context-free path queries.'' 2014
        \item \emph{Zhang X. et al.} ``Context-free path queries on RDF graphs.'' 2016
    \end{itemize}
    \item Static code analysis (Language Reachability Framework)
    \begin{itemize}
        \item \emph{Thomas Reps et al.} ``Precise interprocedural dataflow analysis via graph reachability.'' 1995 
        \item \emph{Qirun Zhang et al.}  ``Efficient subcubic alias analysis for C.'' 2014
        \item \emph{Dacong Yan et al.} ``Demand-driven context-sensitive alias analysis for Java.'' 2011
        \item \emph{Jakob Rehof and Manuel Fahndrich.} ``Type-base flow analysis: from polymorphic subtyping to CFL-reachability.'' 2001
    \end{itemize}
  \end{itemize}
\end{frame}


%\begin{frame}
%  \transwipe[direction=90]
%  \frametitle{Context-free language constraints}
%
%\begin{itemize} 
%\item Interprocedural static nullability analysis\footnote{\emph{Kai Wang et. al.} Graspan: a single-machine disk-based graph system for interprocedural 
%static analyses of large-scale systems code. 2017}
%  
%\begin{itemize} 
%   \item ``We have identified a total of 1127 unnecessary NULL tests in Linux, 149 in PostgreSQL, 
%   32 in httpd.''
%   \item ``Our analyses reported 108 new NULL pointer dereference bugs in Linux, among which 23 are false positives''
%   \item ``For PostgreSQL and httpd, we detected 33 and 14 new NULL pointer bugs; our manual 
%   validation did not find any false positives among them.''
%\end{itemize}
%
%\end{itemize}
%
%\end{frame}

%\begin{frame}
%  \transwipe[direction=90]
%  \frametitle{Existing Approaches}
%  \begin{itemize}
%    \item Do not use the power of advanced parsing techniques
%    \begin{itemize}
%       \item Are mostly based on CYK \\ (Zhang, et al. ``Context-Free Path Queries on RDF Graphs.''; \\ Hellings. ``Conjunctive Context-Free Path Queries.'')
%       \item Do not provide useful structural representation of result
%     \end{itemize}
%    \item Impose restrictions on input
%    \begin{itemize}
%       \item Do not process input graphs with cycles \\ (Sevon, Eronen. ``Subgraph Queries by Context-Free Grammars.'')
%       \item Are restricted to certain grammar classes
%     \end{itemize}
%  \end{itemize}
%\end{frame}

\begin{frame}
  \transwipe[direction=90]
  \frametitle{Open Problems}
  \begin{itemize}
    \item Development of efficient algorithms
    \item Effective utilization of GPGPU and parallel programming
    \item Lifting up the limitations on the input graph and the query language
  \end{itemize}
\end{frame}

\begin{frame}
  \transwipe[direction=90]
  \frametitle{The algorithm}

\begin{algorithm}[H]
\begin{algorithmic}[1]
\caption{Context-free recognizer for graphs}
\label{alg:graphParse}
\Function{contextFreePathQuerying}{D, G}
    
    \State{$n \gets$ the number of nodes in $D$}
    \State{$E \gets$ the directed edge-relation from $D$}
    \State{$P \gets$ the set of production rules in $G$}
    \State{$T \gets$ the matrix $n \times n$ in which each element is $\varnothing$}
    \ForAll{$(i,x,j) \in E$}
    \Comment{Matrix initialization}
        \State{$T_{i,j} \gets T_{i,j} \cup \{A~|~(A \rightarrow x) \in P \}$}
    \EndFor    
    \While{matrix $T$ is changing}
       
        \State{$T \gets T \cup (T \times T)$}
        \Comment{Transitive closure $T^{cf}$ calculation} 
    \EndWhile
\State \Return $T$
\EndFunction
\end{algorithmic}
\end{algorithm}

\end{frame}


\begin{frame}[fragile]
  \transwipe[direction=90]
  \frametitle{Derivation Step}

  \begin{tabular}{p{4cm} | p{6cm} }
      $$ A \rightarrow x $$    

   \begin{center}
      \includegraphics[height=3.5cm]{pictures/tree1.pdf}
    \end{center}

    &
      $$ A \rightarrow B C $$  

    \begin{center}   
      \includegraphics[height=3.5cm]{pictures/tree2.pdf}
    \end{center} 
  \end{tabular}

\end{frame}
  
\begin{frame}
  \transwipe[direction=90]
  \frametitle{Matrix Multiplication}
  \begin{itemize}
    \item Subset multiplication, $N_1, N_2 \subseteq N$
    \begin{itemize} 
      \item $N_1 \cdot N_2 = \{A~|~\exists B \in N_1, \exists C \in N_2 \text{ such that }(A \rightarrow B C) \in P\}$
    \end{itemize}
    \item Subset addition: set-theoretic union.
  \end{itemize}

  \begin{itemize}
    \item Matrix multiplication
    \begin{itemize}
      \item Matrix of size $|V| \times |V|$
      \item Subsets of $N$ are elements
      \item $c_{i,j} = \bigcup^{n}_{k=1}{a_{i,k} \cdot b_{k,j}}$
    \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}
  \transwipe[direction=90]
  \frametitle{Transitive Closure}
  \begin{itemize}
    \item $a^{cf} = a^{(1)} \cup a^{(2)} \cup \cdots$
    \item $a^{(1)} = a$
    \item $a^{(i)} = a^{(i-1)} \cup (a^{(i-1)} \times a^{(i-1)}), ~i \ge 2$
  \end{itemize}
\end{frame}

\begin{frame}
  \transwipe[direction=90]
  \frametitle{The algorithm}

\begin{algorithm}[H]
\begin{algorithmic}[1]
\caption{Context-free recognizer for graphs}
\label{alg:graphParse}
\Function{contextFreePathQuerying}{D, G}
    
    \State{$n \gets$ the number of nodes in $D$}
    \State{$E \gets$ the directed edge-relation from $D$}
    \State{$P \gets$ the set of production rules in $G$}
    \State{$T \gets$ the matrix $n \times n$ in which each element is $\varnothing$}
    \ForAll{$(i,x,j) \in E$}
    \Comment{Matrix initialization}
        \State{$T_{i,j} \gets T_{i,j} \cup \{A~|~(A \rightarrow x) \in P \}$}
    \EndFor    
    \While{matrix $T$ is changing}
       
        \State{$T \gets T \cup (T \times T)$}
        \Comment{Transitive closure $T^{cf}$ calculation} 
    \EndWhile
\State \Return $T$
\EndFunction
\end{algorithmic}
\end{algorithm}

\end{frame}

\begin{frame}
  \transwipe[direction=90]
  \frametitle{Algorithm Correctness}
\begin{mytheorem}
 Let $D = (V,E)$ be a graph and let $G =(N,\Sigma,P)$ be a grammar. 
 
 Then for any $i, j$ and for any non-terminal $A \in N$, $A \in a^{cf}_{i,j}$ iff $(i,j) \in R_A$.
\end{mytheorem}


\begin{mytheorem}
 Let $D = (V,E)$ be a graph and let $G =(N,\Sigma,P)$ be a grammar. 
 
 The Algorithm~\ref{alg:graphParse} terminates in a finite number of steps. 
\end{mytheorem}
\end{frame}

       

       
            
\begin{frame}
  \transwipe[direction=90]
  \frametitle{Architecture}

\end{frame}

\begin{frame}
  \transwipe[direction=90]
  \frametitle{Limitations }
  \begin{itemize}
\item !!!
\item !!!
\item !!!
\item !!!
\end{itemize}

\end{frame}

            
\begin{frame}
  \transwipe[direction=90]
  \frametitle{Examples}         
\end{frame}     

\begin{frame}
  \transwipe[direction=90]
  \frametitle{future work}         
\begin{itemize}
\item !!!
\item !!!
\item !!!
\item !!!
\end{itemize}
\end{frame}     
            
            
\begin{frame}
  \transwipe[direction=90]
  \frametitle{Summary}         
\begin{itemize}
\item Algorithm for context-free path querying 
\item Works on any input graph
\item Supports any context-free constraints 
\item Is independent of matrix representation
\item Can utilize GPGPU easily and efficiently 
\end{itemize}
\end{frame}           
            
\begin{frame}
\transwipe[direction=90]
\frametitle{Contact Information}
\begin{itemize}
  \item Semyon Grigorev: \href{mailto:s.v.grigoriev@spbu.ru}{s.v.grigoriev@spbu.ru}
  \item Kirill Smirenko: \href{mailto:k.smirenko@gmail.com}{k.smirenko@gmail.com}
\end{itemize}
\begin{itemize}
  \item Brahma.FSharp: \href{https://github.com/YaccConstructor/Brahma.FSharp}{https://github.com/YaccConstructor/Brahma.FSharp}
\end{itemize}
\end{frame}
\end{document}

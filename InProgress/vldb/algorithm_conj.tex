\section{Graph parsing using conjunctive grammars}
Since the query evaluation using the relational query semantics and conjunctive grammars is undecidable problem then we propose an algorithm that calculates the over-approximation of all conjunctive relations $R_A$.

\subsection{Reducing graph parsing to transitive closure} \label{section_reducing_conj}
In this section, we show how the over-approximation of all conjunctive relations $R_A$ can be calculated by computing the transitive closure.

Let $G = (N,\Sigma,P)$ be a conjunctive grammar and $D = (V, E)$ be a graph. We number the nodes of the graph $D$ from 0 to $(|V| - 1)$ and we associate the nodes with their numbers. We initialize $|V| \times |V|$ matrix $b$ with $\emptyset$. Further, for every $i$ and $j$ we set $b_{i,j} = \{A_k~|~((i,x,j) \in E) \wedge ((A_k \rightarrow x) \in P)\}$. Finally, we compute the transitive closure $b^+ = b^{(1)} \cup b^{(2)} \cup \cdots$ where $b^{(i)} = b^{(i-1)} \cup (b^{(i-1)} \cdot b^{(i-1)})$, $i \ge 2$ and $b^{(1)} = b$. For the transitive closure $b^+$, the following statements holds.

\begin{lemma}
Let $D = (V,E)$ be a graph, let $G =(N,\Sigma,P)$ be a conjunctive grammar. Then for any $i, j$ and for any non-terminal $A \in N$, if $(i,j) \in R_A$ and $i \pi j$, such that there is a derivation tree according to the string $l(\pi)$ and a conjunctive grammar $G_A = (N,\Sigma,P,A)$ of the height $h \leq k$ then $A \in b^{(k)}_{i,j}$.
\end{lemma}
\begin{proof}(Proof by Induction)

\textbf{Basis}: Show that the statement of the lemma holds for $k = 1$. For any $i, j$ and for any non-terminal $A \in N$, if $(i,j) \in R_A$ and $i \pi j$, such that there is a derivation tree according to the string $l(\pi)$ and a conjunctive grammar $G_A = (N,\Sigma,P,A)$ of the height $h \leq 1$ then there is edge $e$ from node $i$ to node $j$ and $(A \rightarrow x) \in P$ where $x = l(\pi)$. Therefore $A \in b^{(1)}_{i,j}$ and it has been shown that the statement of the lemma holds for $k = 1$.

\textbf{Inductive step}:
\end{proof}

\begin{mytheorem}\label{thm:correct_conj}
 Let $D = (V,E)$ be a graph and let $G =(N,\Sigma,P)$ be a conjunctive grammar. Then for any $i, j$ and for any non-terminal $A \in N$, if $(i,j) \in R_A$ then $A \in b^+_{i,j}$.
\end{mytheorem}
\begin{proof}
\end{proof}

Thus, we show how the over-approximation of all conjunctive relations $R_A$ can be calculated by computing the transitive closure $b^+$ of the matrix $b$.



\subsection{The algorithm} \label{section_algorithm_conj}
In this section we introduce an algorithm for calculating the transitive closure $b^+$ which was discussed in Section~\ref{section_reducing_conj}.

The following algorithm takes on input a graph $D = (V, E)$ and a conjunctive grammar $G = (N,\Sigma,P)$.

\begin{algorithm}[H]
\begin{algorithmic}[1]
\caption{Conjunctive recognizer for graphs}
\label{alg:graphParse_conj}
\Function{graphParse}{D, G}
    
\EndFunction
\end{algorithmic}
\end{algorithm}

We need to show that the Algorithm~\ref{alg:graphParse_conj} terminates in a finite number of steps. Since each element of the matrix $T$ contains no more than $|N|$ non-terminals, the total number of non-terminals in the matrix $T$ does not exceed $|V|^2|N|$. Therefore, the following theorem holds.

\begin{mytheorem}\label{thm:finite_conj}
 Let $D = (V,E)$ be a graph and let $G =(N,\Sigma,P)$ be a conjunctive grammar. Algorithm~\ref{alg:graphParse_conj} terminates in a finite number of steps. 
\end{mytheorem}
\begin{proof}
\end{proof}

\section{Related Work}
\label{section_related}
\subsection{Theory}
Traditionally, query languages for graph databases use regular expressions to describe paths to find~\cite{reutter2017regular,fan2011adding,abiteboul1997regular,nole2016regular,graphDB}, but there are some other useful queries, which cannot be expressed by regular expressions. For example, there are classical \emph{same-generation queries}~\cite{FndDB}, which can be used for finding all the nodes at the same level in some hierarchy, and are useful for discovering vertex similarity. The context-free path querying algorithms can be used to evaluate such types of queries since this queries can be represented by context-free grammars.  

There are a number of solutions~\cite{hellingsRelational,GraphQueryWithEarley,RDF} for context-free path query evaluation w.r.t. relational query semantics, which make use of such parsing algorithms as CYK~\cite{kasami,younger} or Earley~\cite{Grune}.

Hellings~\cite{hellingsRelational} presented an algorithm for context-free path query evaluation using relational query semantics. According to Hellings, for a given graph \mbox{$D = (V, E)$} and a grammar $G = (N, \Sigma, P)$ the context-free path query evaluation w.r.t. relational query semantics reduces to a calculation of a set of context-free relations $R_A$. Thus, in this paper, we focus on the calculation of these context-free relations. 

Other examples of path query semantics are \emph{single-path} and \emph{all-path query semantics}~\cite{hellingsPathQuerying}. The all-path query semantics requires a finding of all possible paths from a node $m$ to a node $n$ whose labelings are derived from a non-terminal $A$. The single-path query semantics requires presenting only one such path. Hellings~\cite{hellingsPathQuerying} presented some algorithms for context-free path query evaluation using single-path and all-path query semantics. If a context-free path query w.r.t. all-path query semantics is evaluated for cyclic graphs, then the query result can be an infinite set of paths. For this reason, in~\cite{hellingsPathQuerying} annotated grammars were proposed as a way to represent the results.

In~\cite{GLL}, an algorithm for a context-free path query evaluation w.r.t. all-path query semantics is proposed. This algorithm is based on the generalized top-down parsing algorithm (GLL)~\cite{scott2010gll}. For the result representation, this solution uses derivation trees, which is more native for grammar-based analysis. The algorithms~\cite{GLL,hellingsPathQuerying} for context-free path query evaluation w.r.t. all-path query semantics can also be used for query evaluation using relational and single-path semantics.

Our work is inspired by Valiant~\cite{valiant}, who proposed an algorithm for general context-free recognition in less than cubic time. This algorithm computes the same parsing table as CYK algorithm but does this by offloading the most intensive computations into calls to the Boolean matrix multiplication procedure. This approach not only provides an asymptotically more efficient algorithm but also allows us to effectively apply GPGPU computing techniques. Valiant's algorithm computes the transitive closure $a^+$ of a square upper-triangular matrix $a$. Valiant also has shown, that the matrix multiplication operation $(\times)$ is essentially the same as $|N|^2$ Boolean matrix multiplications, where $|N|$ is the number of non-terminals in the given context-free grammar in Chomsky normal form.

Yannakakis~\cite{transitive-closure} analyzed the reducibility of various path querying problems to the calculation of transitive closure. He formulated a problem of Valiant's technique generalization for the context-free path query evaluation w.r.t. relational query semantics. Also, he conjectured, that this technique cannot be generalized for arbitrary graphs, though it does for acyclic graphs.

Thus, our algorithm is the first matrix-based algorithm for the context-free path query evaluation w.r.t. relational query semantics.
\subsection{Practice}



The algorithm of Hellings~\cite{hellingsRelational} was implemented~\cite{RDF} in the context of RDF processing.

GLL implementation

Neo4j




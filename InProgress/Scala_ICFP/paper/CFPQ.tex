\section{Contex-Free Path Querying Problem}

In this section we intrduce context-free path querying problem (or context-free reachability problem) formal description.

First of all we introduce necessary definitions.
\begin{itemize}
  \item Context-free grammar is a quadruple $G=(N, \Sigma, P, S)$, where $N$ is a set of nonterminal symbols, $\Sigma$ is a set of terminal symbols, $S \in N$ is a start nonterminal, and $P$ is a set of productions. 
  \item $\mathcal{L}(G)$ denotes a language specified by the grammar $G$, and is a set of terminal strings derived from the start nonterminal of $G$: $L(G) = \{\omega | S \Rightarrow_{G}^{*} \omega\}$.
  \item Directed graph is a triple $M = (V,E,L)$, where $V$ is a set of vertices, $L \subseteq \Sigma$ is a set of labels, and a set of edges $E\subseteq V\times L\times V$. 
  We assume that there are no parallel edges with equal labels: for every $e_1=(v_1,l_1,v_2) \in E, e_2=(u_1,l_2,u_2) \in E$ if $v_1 = u_1$ and $v_2 = u_2$ then $l_1 \neq l_2$.
  \item $tag: E \rightarrow L$ is a helper function which returns a tag of a given edge. $$tag(e = (v_1,l,v_2), e \in E) = l$$
  \item $\oplus: L^+ \times L^+ \rightarrow L^+$ denotes a tag concatenation operation.
  \item $\Omega$ is a helper function which constructs a string produced by the given path. For every $p \text{ path in } M$
  $$ \Omega(p = e_{0},e_{1},\dots,e_{n-1}) = tag (e_{0}) \oplus \dots \oplus tag (e_{n-1}).$$
\end{itemize}

Using these definitions, we define the context-free language constrained path querying as, given a query in form of grammar $G$, to construct the set of paths $$Q(M,G)=\{p|p \text{ is path in } M, \Omega(p) \in \mathcal{L}(G)\}.$$
Reachability problem is a pretty similar and may be formulated as follows: $$Q(M,G) =\{ (v_0,v_n) \ | \ \exists p \text{ is path in } M, p = v_0 \xrightarrow{l_0} \cdots \xrightarrow{l_{n-1}}v_n,$$
$$ \Omega(p) \in   \mathcal{L}(G))\}$$.

Note that $Q(M, G)$ can be an infinite set, hence it cannot be represented explicitly. 
In order to solve this problem, we construct compact data structure representation which stores all elements of $Q(M,G)$ in finite space and from which one can extract any of them.

The main idea of our solution is that language may be specified in terms of parser combinators.
Further we describe some detailes of parsing techniques which is necessary to provide generic parer combinators based solution for CFPQs evaluation.

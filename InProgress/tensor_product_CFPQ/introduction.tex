\section{Introduction}

Language-constrained path querying~\cite{!!!}, and particularly context-free path querying (CFPQ)~\cite{!!!}, allows one to express path constraints for a graph in terms of context-free grammars: path in graph  included to query result only if concatenated labels along this path form a word belongs to the language, generated by query grammar. CFPQ is widely used in bioinformatics~\cite{!!!}, graph databases~\cite{!!!}, and RDF analysis~\cite{!!!}. 

CFPQ algorithms are actively developed, but still there is a problem with its performanve~\cite{10.1145/3335783.3335791}.
One of the most promising algorithms is the algorithm, proposed by Rustam Azimov~\cite{Azimov:2018:CPQ:3210259.3210264}. 
This algorithm allows one to offload computationsl intencive part to high-performance libraries for linear algebra, this way one can utilize modern parallel hardware for CFPQ.
But, as far as performance depends on grammar size, a number of productions for a grammar is still a problem, since it is processed in form of Chomsky Normal Form (CNF). 

In this work, we propose new algorithm, expressed in terms of matrix operations, which can utilise expressive power of regular expressions as well as accept context-free queries, and also provide some space for future query optimisations.

Main contribution of this paper could be summarised as follows.

\begin{enumerate}
\item We introduce an new algorithm for CFPQ, which is based on recursive state machines intersection and can be expressed in terms of Kronecker product and transitive closure evaluation.
\item We provide a step-by-step example of the algorithm.
\item We provide an evaluation of the proposed algorithm and its comparison with matrix based algorithm. Evaluation results show that the idea is promising because we outperform matrix-based algorithm on the worst case data set, but optimizations are requred to be applicable for real-world cases.
\end{enumerate}


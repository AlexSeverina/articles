\chapter{Сравнение и соотнесение} \label{chaptComp}

В данной главе представлено сравнение разработанного решения с основными существующими решениями в области анализа динамически формируемых строковых выражений. Описание существующих решений представлено в разделе~\ref{SELToolsDescr} данной работы, поэтому далее приводится только сравнение.

В качестве инструментов, с которыми производилось сравнение выбраны следующие: Alvor, JSA, PHPSA, IntelliLang, Varis. Так же проводилось сравнение с инструментом, названным нами условно AbsPars, реализованным авторами работ по абстрактному синтаксическому анализу~\cite{LrAbstract1, LrAbstract2, LRAbstractParsingSema}. Несмотря на то что в свободном доступе реализации алгоритма, изложенного в указанных статьях не обнаружено, самими авторами приводятся достаточно подробные результаты апробации реализации алгоритма, что позволяет сделать некоторые выводы о его основных возможностях. Кроме того, стоит отметить, что Varis является очень молодым инструментом: впервые он был представлен в 2015 году на конференции ICSE\footnote{Международная конференция по разработке программного обеспечения (International Conference on Software Engineering). Сайт конференции: \url{http://2015.icse-conferences.org/}, (посещён 29.07.2015)}. По этой причине детальная оценка его возможностей затруднена. 

Для сравнения инструментов были выбраны критерии, представленные в таблице~\ref{tbl:metricsForComparison}. Критерии отражают основные функциональные возможности инструментов, важные для практического решения задач в различных областях. Сравнение по более детальным критериям не является осмысленным, так как оно становится связанным с особенностями решаемых задач, реализацией, используемыми подходами и часто является их следствием, а не свойством самого инструмента.

\begin{table} [htbp]
  \centering
  \parbox{14cm}{\caption{Критерии сравнения инструментов анализа динамически формируемых строковых выражений}\label{tbl:metricsForComparison}}
  \begin{tabular}{| p{3.5cm} | p{3cm} | p{7.5cm} |}
  \hline                               
  \hline
  Критерий   & Название колонки в таблице с результатами сравнения~\ref{tbl:comparison} &Описание \\
  \hline
%  \hline 
  Платформа для разработки & Платформа & Предоставляется ли в явном виде платформа для создания новых инструментов статического анализа динамически формируемых выражений.  \\
%  \hline
  Построение леса разбора & Лес разбора & Реализована ли в инструменте функциональность по построению леса разбора динамически формируемого кода.\\
%  \hline
  Поиск синтаксических ошибок & Синт. ошибки & Обнаруживает ли инструмент синтаксические ошибки в динамически формируемом коде.\\
%  \hline
  Поиск семантических ошибок & Сем. ошибки & Обнаруживает ли инструмент семантические ошибки в динамически формируемом коде.\\
%  \hline
  Подсветка синтаксиса & Подсветка & Обеспечивает ли инструмент подсветку синтаксиса динамически формируемого кода.\\
%  \hline
  Модульность обработки & Модульность & Выделены ли отдельные независимые шаги обработки или же анализ является монолитным. Реализованы ли соответствующие выделенным шагам независимые компоненты.\\

  \hline
  \hline
  \end{tabular}
\end{table}


В таблице~\ref{tbl:comparison} приведены основные результаты сравнения инструментов статического анализа динамически формируемых строковых выражений на основе критериев, представленных ранее. Использованы следующие обозначения.
\begin{itemize}
    \item '$+$' --- функциональность, соответствующая критерию, полностью реализована.
    \item '$-$' --- функциональность, соответствующая критерию, полностью не реализована.
    \item '$+-$' --- соответствующая функциональность реализована частично.   
\end{itemize}

\begin{table} [htbp]
  \centering
\parbox{14cm}{\caption{Сравнение инструментов анализа динамически формируемых строковых выражений}\label{tbl:comparison}}
\begin{threeparttable}
  
  \begin{tabular}{| p{2.6cm} || p{2cm} | p{1.8cm} | p{1.8cm} | p{1.8cm} | p{2cm} | p{2cm}l |}
  \hline                               
  \hline
  \small{Инструмент}   &\centering \small{Платформа} &\centering \small{Лес разбора}      &\centering \small{Синт. ошибки} &\centering \small{Сем. ошибки} &\centering \small{Подсветка} &\centering \small{Модульность} & \\
  \hline 
  AbsPars      &\centering  $-$      &\centering  $+-$\tnote{a}                 &\centering  $+$                  &\centering  $+$                 &\centering  $-$                 &\centering  $-$        & \\
  Alvor        &\centering  $-$      &\centering  $-$                    &\centering  $+$                  &\centering  $-$                 &\centering  $-$                 &\centering  $+$        &\\
  JSA          &\centering  $-$      &\centering  $-$                    &\centering  $+$                  &\centering  $-$                 &\centering  $-$                 &\centering  $-$        &\\
  PHPSA        &\centering  $-$      &\centering  $-$                    &\centering  $+$                  &\centering  $-$                 &\centering  $-$                 &\centering  $-$        &\\
  IntelliLang  &\centering  $+-$\tnote{b}   &\centering  $-$                    &\centering  $+$                  &\centering  $+$                 &\centering  $+$                 &\centering  $+$        &\\
  Varis        &\centering  $-$      &\centering  $+$\tnote{c}                  &\centering  $+$                  &\centering  $-$                 &\centering  $+$                 &\centering  $-$        &\\
  YC.SEL.SDK   &\centering  $+$      &\centering  $+$                    &\centering  $-$\tnote{d}                &\centering  $+$                 &\centering  $+$                 &\centering  $+$        &\\
  \hline
  \hline
  \end{tabular}
  \begin{tablenotes}
            \item[a] В работе~\cite{LRAbstractParsingSema} утверждается, что поддерживаются атрибутные грамматики для описания языка. Это даёт возможность описать семантику построения леса. При этом, в работе обсуждаются проблемы с падением точности анализа при использовании семантики, а построение леса не обсуждается. Возможность построения корректного конечного представления леса разбора требует отдельного исследования.
            \item[b] IntelliLang использует возможности платформы IntelliJ IDEA (\url{https://www.jetbrains.com/idea/}, посещён 29.07.2015), по этому расширение некоторых возможностей унифицировано, однако самостоятельной платформы для анализа встроенных языков не предоставляется.
            \item[c] Такие свойства конструируемой структуры данных, как конечность, а так же возможности её дальнейшей обработки в общем виде не обсуждаются.
            \item[d] Возможность диагностики синтаксических ошибок не реализована на данный момент в рамках платформы. Однако данная задача может быть решена другими инструментами, так как обработка производится по шагам и возможно добавить новый без существенных затрат.
  \end{tablenotes}
  \end{threeparttable}
\end{table}

Проведённое сравнение позволяет выявить несколько аспектов.
\begin{itemize}
    \item Многие инструменты могут быть расширены, однако ранее не предоставлялось полноценного самостоятельного инструментария специально предназначенного для создания новых инструментов для обработки динамически формируемых выражений.
    \item Основная цель большинства инструментов --- это проверка корректности динамически формируемого кода. Прежде всего осуществляется поиск синтаксических ошибок.
    \item Инструменты реализованы на основе разных подходов и предназначены для решения разных задач, поэтому детальное сравнение их возможностей, производительности и других аспектов не представляется оправданным. Например, инструмент PHPSA изначально создавался для решения задачи проверки корректности динамически формируемых выражений и отсутствие подсветки синтаксиса не является его недостатком.
    \item Существование различных инструментов для решения различных задач и создание новых говорит о том, что обработка встроенных языков является актуальной задачей.
\end{itemize}

В результате можно утверждать, что YC.SEL.SDK является единственной полноценной платформой для создания различных инструментов статического анализа динамически формируемых выражений, применимых в разных областях и обладающих широкими функциональными возможностями.



% !TeX spellcheck = russian-aot
% !TeX encoding = UTF-8
% ----------------------------------------------------------------
% plc-sample-2017.tex
% Demonstration of PLC (Programming Languages and Compilers)
%   conference proceedings and articles template file
% http://plc.sfedu.ru/for-authors.html
% Main file
% Created: 20 January, 2017
% ----------------------------------------------------------------
%
% Requirements:
% - UTF-8 encoding;
% - Standard article document class;
% - A4 paper size;
% - 10pt font;
% - Single column;
% - Floating environments for figures (e. g.
%   \begin {figure} ... \end {figure});
% - Authors' emails (optionally) and affiliations in \author command;
% - An abstract and keywords are required;
% - If a BibTeX file is used, it must be in the form: <prefix>-biblio.bib
%   where <prefix> consists of the author's name and an abbreviated
%   organization name;
% - All used labels must be started with the same <prefix>;
% - Volume: - for proceedings: up to 2 pages; for articles: up to 8 pages.
%

\documentclass [a4paper] {article}

% ----------------------------------------------------------------
% Required packages

\usepackage [T2A] {fontenc}
\usepackage [utf8] {inputenc}
\usepackage [english, russian] {babel}

\usepackage {url}
\usepackage [style = gost-numeric] {biblatex}


% ----------------------------------------------------------------
% Optional packages

\usepackage {lipsum}

% ----------------------------------------------------------------
% Title settings

\addbibresource {smolina-spbgetu-biblio.bib}

% ----------------------------------------------------------------
% Title settings

\title %
  {Библиотека парсер-комбинаторов для синтаксического анализа графов}

\author %
{%
  Смолина~С.\,К., \url {sov-95@mail.ru} \and %
  Вербицкая~Е.\,А., \url {kajigor@gmail.com} \and %
  Санкт-Петербургский государственный электротехнический
  \\университет «ЛЭТИ» им. В.И. Ульянова (Ленина)
  \\(СПбГЭТУ «ЛЭТИ») \\
}%

\date {}    % if desired

% ----------------------------------------------------------------
\begin {document}
% ----------------------------------------------------------------

\maketitle

\begin {abstract}
  %
  Многие задачи, возникающие в области графовых баз данных и статического анализа динамически формируемых выражений, можно сформулировать как задачу синтаксического анализа графа, то есть задачу нахождения путей в графе, которые описывают цепочки, выводимые в данной грамматике. В докладе будет рассмотрена модификация библиотеки парсер-комбинаторов Meerkat для синтаксического анализа графов. 
  %
  \\ \textbf {Ключевые слова:} синтаксический анализ графов, парсер-комбинаторы, графовые базы данных.
  %
  % or:
  % \\ \textbf {Keywords:} ...
  %
\end {abstract}

Графы и графовые базы имеют широкое применение во многих областях: в сферах биоинформатики, логистики, социальных сетей и других. Одной из проблем в данной сфере является задача поиска путей в графе, удовлетворяющих некоторым ограничениям. Ограничения часто формулируются некоторой контекстно-свободной грамматикой. В таком случае задача сводится к поиску путей в графе, которые бы соответствовали строкам в контекстно-свободном языке.


Существуют различные подходы к синтаксическому анализу графов (например, ~\cite{smolina-spbgetu-hellings}, ~\cite{smolina-spbgetu-graph-parsing}, ~\cite{smolina-spbgetu-sevon}). Однако такие подходы не удобны при работе с графовыми базами данных, поскольку усложняется формирование запроса внутри целевой программы. Этот недостаток можно исправить при помощи техники парсер-комбинаторов. К сожалению, большинство существующих библиотек парсер-комбинаторов анализируют только линейный вход (строки), поэтому их непосредственное использование для решения данной задачи невозможно. В рамках данной работы была поставлена задача разработки библиотеки парсер-комбинаторов для работы с графами.
За основу решения была выбрана библиотека парсер-комбинаторов Meerkat\footnote{https://github.com/meerkat-parser/Meerkat} ~\cite{smolina-spbgetu-meerkat}, реализованная на языке Scala. Данная библиотека осуществляет построение леса разбора Binarized Shared Packed Parse Forest (SPPF)~\cite{smolina-spbgetu-sppf} для произвольных (в том числе неоднозначных) контекстно-свободных грамматик.


В библиотеке реализованы четыре базовых комбинатора: terminal, epsilon, seq и rule. Первые два комбинатора представляют собой базовые распознаватели для терминала и пустой строки. Комбинатор seq выполняет последовательную композицию распознавателей. Комбинатор rule используется для задания правила вывода в терминах контекстно-свободных грамматик: нетерминала и соответствующих ему альтернатив. С помощью этих комбинаторов можно задать произвольную контекстно-свободную грамматику. 


Библиотека осуществляет поиск всех возможных способов разбора строки. Это удалось достичь за счет использования техники Continuation-Passing Style (CPS) и специальной процедуры мемоизации. Идея программирования в стиле Continuation-Passing состоит в передаче управления через механизм продолжений. Продолжение в данном контексте представляет собой состояние программы в конкретный момент времени, которое возможно сохранить и использовать для перехода в данное состояние. Для реализации данного подхода был создан такой тип данных как Result[T],  который представляет собой монаду и реализует следующие три метода: map, flatMap, orElse. Таким образом, любой результат работы распознавателя можно представить как композицию двух функций, используя метод flatMap, или как комбинацию результатов, используя метод orElse. Для избежания экспоненциальной сложности и для обработки лево-рекурсивных нетерминалов используется техника мемоизации, сохраняющая информацию о том, какие продолжения уже вычислялись, а также их результаты. Продолжение для конкретного символа вычисляется один раз и в дальнейшем возвращается лишь результат. 


Для решения поставленной задачи потребовалось изменить тип входных данных на граф и преобразовать базовый комбинатор, разбирающий терминал. В отличие от линейного входа при анализе графа позицией во входном потоке является вершина графа, а понятие ``следующего символа'' заменяется на множество символов, написанных на исходящих из данной вершины ребрах. Синтаксический разбор при этом продолжается по тому пути, который начинается с ребра с соответствующим символом. Продолжения и его результаты сохраняются для конкретной вершины и переиспользуются, при попадании в ту же вершину. Таким образом решается проблема с графами, которые содержат циклы.  Для случая, когда из вершины исходят ребра с одинаковыми символами, результат комбинируется с помощию метода orElse. После построения SPPF вычисляются семантика. На данный момент семантика возможно посчитать для случая, когда SPPF является деревом.


В дальнейшем планируется интегрировать библиотеку\footnote{https://github.com/sofysmol/Meerkat} с промышленной графовой СУБД Neo4J, что позволит использовать данное решение в таких сферах как биоинформатика,  логистика, социальные сети.

\printbibliography

% ----------------------------------------------------------------
\end {document}
% ----------------------------------------------------------------

\endinput

% End of File